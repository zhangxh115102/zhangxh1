package com.shsunedu.api;

import javax.annotation.Resource;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.shsunedu.base.api.model.ClassRoom;
import com.shsunedu.base.api.service.ICourseLessonService;
import com.shsunedu.security.AuthWhite;
import com.shsunedu.tool.JsonUtil;

@RestController
@RequestMapping("/courseLesson")
public class CourseLessonApi extends BaseApi{
	@Resource
	ICourseLessonService CourseLessonService;

	/**
     * 方法名: CourseLesson<br>
     * 描述: 通过单科商品id查询对应的课程章节<br>
     * @param classRoom
     * @return String
     */
	@AuthWhite
	@RequestMapping("/lesson")
	public String CourseLesson(ClassRoom classRoom){
		JsonUtil jsonUtil = new JsonUtil();
        try {
        	jsonUtil.addToRoot("listCourses", CourseLessonService.listLessonPage(classRoom).getResult());
          return jsonUtil.toSuccessString();
        } catch (Exception e) {
            e.printStackTrace();
            return jsonUtil.toErrorString(e.getMessage());
        }
	}
	
	
	/**
     * 方法名: onceCourseLesson<br>
     * 描述:定位学员的近期一次直播<br>
     * @param 
     * @return String
     */
	@AuthWhite
	@RequestMapping("/onceLive")
	public String onceCourseLesson(){
		JsonUtil jsonUtil = new JsonUtil();
		try {
			jsonUtil.addToRoot("live", CourseLessonService.onceCourseLessonLive(getIdFromToken()));
			return jsonUtil.toSuccessString();
		} catch (Exception e) {
			 e.printStackTrace();
	            return jsonUtil.toErrorString(e.getMessage());
		}
		
	}
	
}
